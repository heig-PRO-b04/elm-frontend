{"version":3,"sources":["index.js"],"names":["storageKey","flags","localStorage","getItem","app","Elm","Main","init","node","document","querySelector","obj","JSON","parse","redirection","setItem","stringify","ports","portStoreCredentials","subscribe","val","removeItem","setTimeout","portSubscribeCredentials","send","window","addEventListener","event","storageArea","key","newValue"],"mappings":";;;AA6BA,aA7BA,IAAA,EAAA,QAAA,kBAGMA,EAAa,cAEbC,EAAQC,aAAaC,QAAQH,GAC7BI,EAAMC,EAAIC,IAAAA,KAAKC,KAAK,CACxBC,KAAMC,SAASC,cAAc,QAC7BT,MAAOA,IAGLU,EAAMC,KAAKC,MAAMZ,GACV,MAAPU,IACFA,EAAIG,YAAc,KAClBZ,aAAaa,QAAQf,EAAYY,KAAKI,UAAUL,KAGlDP,EAAIa,MAAMC,qBAAqBC,UAAU,SAAUC,GACtC,MAAPA,EACFlB,aAAamB,WAAWrB,GAExBE,aAAaa,QAAQf,EAAYY,KAAKI,UAAUI,IAGlDE,WAAW,WACTlB,EAAIa,MAAMM,yBAAyBC,KAAKJ,IACvC,KAGLK,OAAOC,iBAAiB,UAAW,SAAUC,GACvCA,EAAMC,cAAgB1B,cAAgByB,EAAME,MAAQ7B,GACtDI,EAAIa,MAAMM,yBAAyBC,KAAKG,EAAMG","file":"elm-frontend.dca20504.js","sourceRoot":"..","sourcesContent":["import { Elm } from \"./src/Main.elm\";\n\n// Maybe we will want to pass the API endpoint in the program flags.\nconst storageKey = \"credentials\";\n\nconst flags = localStorage.getItem(storageKey);\nconst app = Elm.Main.init({\n  node: document.querySelector(\"main\"),\n  flags: flags\n});\n\nlet obj = JSON.parse(flags);\nif (obj != null) {\n  obj.redirection = null;\n  localStorage.setItem(storageKey, JSON.stringify(obj))\n}\n\napp.ports.portStoreCredentials.subscribe(function (val) {\n  if (val == null) {\n    localStorage.removeItem(storageKey);\n  } else {\n    localStorage.setItem(storageKey, JSON.stringify(val));\n  }\n\n  setTimeout(function () {\n    app.ports.portSubscribeCredentials.send(val);\n  }, 0);\n});\n\nwindow.addEventListener(\"storage\", function (event) {\n  if (event.storageArea === localStorage && event.key === storageKey) {\n    app.ports.portSubscribeCredentials.send(event.newValue);\n  }\n});"]}